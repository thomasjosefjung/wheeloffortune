function updateColorsArray(){colors=[];let e=allAttendees.length;for(i=0;i<e;++i)colors.push(randColor())}function resetWheel(){updateColorsArray(),currentAttendees=allAttendees,wheelState=StateEnum.resting,rotationState=0,paintWheel()}function run(){currentSpeed>0||wheelState==StateEnum.resting&&(wheelState=StateEnum.accelerating,currentAttendees.length<1&&(currentAttendees=allAttendees),scale=.003,targetSpeed=scale*(3+9*Math.random()),timer=setInterval(step,delta_t))}function step(){switch(wheelState){case StateEnum.accelerating:Math.abs(currentSpeed)>=targetSpeed?wheelState=StateEnum.decelerating:currentSpeed+=.02*currentDirection*delta_t/1e3;break;case StateEnum.decelerating:Math.abs(currentSpeed)>5e-5?currentSpeed/=1+2*delta_t/500:wheelState=StateEnum.resting;break;case StateEnum.resting:{currentSpeed=0,currentDirection*=-1,clearInterval(timer),restart(120);let e=getPersonIndex(rotationState),t=document.getElementById("guy");return t.textContent=currentAttendees[e],t.style.backgroundColor=colors[allAttendees.indexOf(currentAttendees[e])],void(currentAttendees=currentAttendees.filter(t=>t!==currentAttendees[e]))}}rotationState+=currentSpeed*delta_t,paintWheel()}function paintWheel(){let e=25,t=canvas.width/2,n=canvas.height/2;ctx.translate(t,n);let r=Math.min(canvas.width,canvas.height)/2.5;clear(),ctx.resetTransform(),ctx.translate(t,n),ctx.save(),ctx.rotate(rotationState),N=currentAttendees.length;let a=1e3*Math.abs(currentSpeed),c=Math.PI/N,l=Math.cos(c)*a,o=Math.sin(c)*a;for(i=0;i<N;++i){let t=i*c*2;ctx.save(),ctx.rotate(t),ctx.shadowColor="gray",ctx.shadowBlur=10,ctx.translate(l,o),ctx.beginPath(),ctx.moveTo(e,0),ctx.lineTo(r,0),ctx.arc(0,0,r,0,2*c,!1);let n=Math.round(Math.cos(2*c)*e),a=Math.round(Math.sin(2*c)*e);ctx.lineTo(n,a),ctx.arc(0,0,e,2*Math.PI/N,0,!0),ctx.closePath(),ctx.fillStyle=colors[allAttendees.indexOf(currentAttendees[i])],ctx.lineWidth=1,ctx.fill(),ctx.shadowBlur=0,ctx.rotate(c),ctx.fillStyle="black",ctx.font=canvas.width/30+"px Arial",ctx.textBaseline="middle",ctx.textAlign="center",ctx.fillStyle="white",ctx.fillText(currentAttendees[i],r/2+5,0),ctx.restore()}ctx.restore(),ctx.beginPath(),ctx.moveTo(r-10,0),ctx.lineTo(r+20,-15),ctx.lineTo(r+20,15),ctx.closePath(),ctx.strokeStyle="#000000",ctx.lineWidth=2,ctx.fillStyle="orange",ctx.fill(),ctx.stroke()}function removeElement(e,t){return 0==t?e.slice(1):t==e.length-1?e.slice(0,-1):e.slice(0,t).concat(e.slice(t+1))}function getPersonIndex(e){e=e/2/Math.PI*360;let t=360/N,n=e%360;angleTop=0-n-t/2,angleTop<0&&(angleTop+=360);let r=Math.round(angleTop/t);return r=r==currentAttendees.length?0:r,r}function clear(){ctx.save(),ctx.resetTransform(),ctx.clearRect(0,0,canvas.width,canvas.height),ctx.restore()}function randColor(){let e=setOfColors[setOfColorsArray[colorIndexCounter++]];return colorIndexCounter>=8&&(colorIndexCounter=0),"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function resize(){document.getElementById("canvas_container"),window.innerHeight,window.innerWidth;let e=Math.min(innerWidth,innerHeight),t=document.getElementById("canvas"),n=.7*e;t.style.width=n+"px",t.style.height=n+"px";let r=n>500?n/2:n;t.width=r,t.height=r,paintWheel()}let setOfColors={red:[234,0,22],fuchsia:[185,2,118],violet:[80,35,127],darkblue:[0,86,145],lightblue:[0,142,207],turquiose:[0,168,176],lightgreen:[120,190,32],darkgreen:[0,98,73]},setOfColorsArray=new Array(8),i=0;for(const e in setOfColors)setOfColorsArray[i++]=e;let colorIndexCounter=0,currentAttendees=allAttendees;const StateEnum={accelerating:1,decelerating:2,resting:3};Object.freeze(StateEnum);let wheelState=StateEnum.resting,canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),currentDirection=1,currentSpeed=0,targetSpeed=0,rotationState=0,delta_t=10,timer=null,colors=[];resetWheel(),paintWheel(),resize();